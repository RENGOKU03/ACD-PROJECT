<!DOCTYPE html>
<html>

<head>
	<title>Signin / Signup for ACD Shopping</title>
	<link rel="icon" href="https://aircraftcomponentdesign.com/wp-content/uploads/2020/11/acd_logo_new.png">
	<link rel="stylesheet" type="text/css" href="loginstyle.css">
	<link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
</head>

<body>
	<h1>Signup for ACD Shopping Mart</h1>
	<div class="main">
		<input type="checkbox" id="chk" aria-hidden="true">

		<div class="signup">
			
				<label for="chk" aria-hidden="true">Sign up</label>
				<input type="text" id="username" name="txt" placeholder="Enter Username" required>
				<input type="email" name="email" id="email" placeholder="Email" required>
				<input type="password" name="pswd" id="password" placeholder="Password" required>
				<button id="register">Sign up</button>
			
		</div>



		<div class="login">
			
				<label for="chk" aria-hidden="true">Login</label>
				<input type="email" id="email" name="email" placeholder="Email" required>
				<input type="password" id="password" name="pswd" placeholder="Password" required>
				<button id="login">Login</button>
			
		</div>
	</div>
</body>




<script type="module">
	// Import the functions you need from the SDKs you need
	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
	import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
	import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
	// TODO: Add SDKs for Firebase products that you want to use
	// https://firebase.google.com/docs/web/setup#available-libraries

	// Your web app's Firebase configuration
	// For Firebase JS SDK v7.20.0 and later, measurementId is optional
	const firebaseConfig = {
		apiKey: "AIzaSyCSOsAdb5KlBTWg8OaI-kb3Np_apubBzBs",
		authDomain: "clone-7e368.firebaseapp.com",
		databaseURL: "https://clone-7e368-default-rtdb.firebaseio.com",
		projectId: "clone-7e368",
		storageBucket: "clone-7e368.appspot.com",
		messagingSenderId: "156834042204",
		appId: "1:156834042204:web:c8a9d2fdc2f90cf488b199",
		measurementId: "G-6TVDW34K96"
	};

	// Initialize Firebase
	const app = initializeApp(firebaseConfig);
	const analytics = getAnalytics(app);
	const auth = getAuth();
	console.log(app);



	//----- New Registration code start	  
	document.getElementById("register").addEventListener("click", function () {
		var email = document.getElementById("email").value;
		var password = document.getElementById("password").value;
		//For new registration
		createUserWithEmailAndPassword(auth, email, password)
			.then((userCredential) => {
				// Signed in 
				const user = userCredential.user;
				console.log(user);
				alert("Registration successfully!!");
				// ...
			})
			.catch((error) => {
				const errorCode = error.code;
				const errorMessage = error.message;
				// ..
				console.log(errorMessage);
				alert(error);
			});
	});
	//----- End




	//----- Login code start	  

	login.addEventListener("click", function(){
		var email = document.getElementById("email").value;
		var password = document.getElementById("password").value;

		signInWithEmailAndPassword(auth, email, password)
			.then((userCredential) => {
				// Signed in 
				const user = userCredential.user;
				console.log(user);
				alert(user.email + " Login successfully!!!");
				document.getElementById('logout');
				Redirect();
				// ...
			})
			.catch((error) => {
				const errorCode = error.code;
				const errorMessage = error.message;
				console.log(errorMessage);
				alert(errorMessage);
			});

	})

//----- End



	



	//----- End
	function Redirect() {
		window.location = "/index.html";
	}

</script>

</html>